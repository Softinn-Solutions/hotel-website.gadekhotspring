@using Softinn.EntityModels.ViewModel
@using EmbunLuxuryVillas.Helpers
@using EmbunLuxuryVillas.ViewModels
@{
    RoomTypeViewModel room = ViewBag.Room;
    List<RoomTypeViewModel> otherRooms = ViewBag.OtherRooms;
    var photos = room.Photos.Any() ? room.Photos : new List<PhotoViewModel>();
    List<PolicyViewModel> policies = ViewBag.ViewModel.Policies;
    CustomRoomViewModel additionalRoomInfo = ViewBag.AdditionalRoomInfo;
}

<div id="page-room-detail">

    <section class="section-sub-banner bg-1">
        <div class="awe-overlay"></div>
        <div class="sub-banner">
            <div class="container">
                <div class="text text-center">
                    <h2>@room.Name</h2>
                    <p></p>
                </div>
            </div>
        </div>
    </section>

    <section class="section-room-detail bg-white">
        <div class="container">
            <div class="room-detail">
                <div class="row">

                    <div class="col-lg-9">
                        @{
                            <div class="room-detail_img">
                                @foreach (var photo in photos)
                                {
                                    <div class="room_img-item">
                                        <img src="@BvHelper.GetImageLinkFromStorage(photo.URLStorage)" alt="@room.Name">
                                    </div>
                                }
                            </div>

                            <div class="room-detail_thumbs">
                                @foreach (var photo in photos)
                                {
                                    <a href="#"><img src="@BvHelper.GetImageLinkFromStorage(photo.URLStorage)" alt="@room.Name"></a>
                                }
                            </div>
                        }
                    </div>

                    <div class="col-lg-3">
                        <div class="room-detail_book">
                            <div class="room-detail_total">
                                <h6>STARTING FROM</h6>

                                <p class="price">
                                    <span class="amout">RM @room.RackRates.Select(rr => rr.Rates).Min().ToString("#")</span> /night
                                </p>
                            </div>

                            <div class="room-detail_form">
                                <form action="/Reservation" method="post">
                                    <label>CHECK IN</label>
                                    <input type="text" name="startDate" class="awe-calendar from" placeholder="Check-In Date" readonly>
                                    <label>CHECK OUT</label>
                                    <input type="text" name="endDate" class="awe-calendar to" placeholder="Check-Out Date" readonly>

                                    <button class="awe-btn awe-btn-13">Book Now</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="room-detail_tab">
                <div class="row">
                    <div class="col-md-3">
                        <ul class="room-detail_tab-header">
                            <li><a href="#overview" data-toggle="tab">OVERVIEW</a></li>
                            <li class="active"><a href="#amenities" data-toggle="tab">Amenities</a></li>
                            <li><a href="#rates" data-toggle="tab">RATES</a></li>
                            <li><a href="#policy" data-toggle="tab">Policy</a></li>
                        </ul>
                    </div>

                    <div class="col-md-9">
                        <div class="room-detail_tab-content tab-content">
                            <div class="tab-pane fade" id="overview">
                                <div class="room-detail_overview">
                                    <h5 class='text-uppercase'>
                                        Overview of @room.Name
                                    </h5>
                                    <br />
                                    @Html.Raw(room.FullDescription)
                                </div>
                            </div>

                            <div class="tab-pane fade active in" id="amenities">
                                <div class="room-detail_amenities">
                                    <div class="row">
                                        <div class="col-xs-6 col-lg-4">
                                            <h6>Amenities</h6>
                                            <ul>
                                                <li>Free wifi</li>
                                                <li>TV</li>
                                                <li>Astro Channel</li>
                                                <li>Air - conditioner</li>
                                                <li>Iron</li>
                                                <li>Kettle</li>
                                                <li>Coffee/tea making facilities</li>
                                                <li>Cooking facilities</li>
                                                <li>Hot & Cold Rain Shower</li>
                                                <li>Hairdryer</li>
                                                <li>Fridge</li>
                                                <li>Safety box</li>
                                                <li>Toiletries</li>
                                                <li>Towels</li>
                                                <li>Baby cot</li>
                                                <li>Writing desk</li>
                                                <li>Toaster</li>
                                            </ul>
                                        </div>
                                        <div class="col-xs-6 col-lg-4">
                                            <h6>Facilities</h6>
                                            <ul>
                                                <li>Parking</li>
                                                <li>Extra mattress (roll-away bed)</li>
                                                <li>Wheelchair friendly</li>
                                                <li>Swimming Pool</li>
                                                <li>Meeting/Conference Room</li>
                                                <li>Family Gathering/Event</li>
                                                <li>Room Service</li>
                                                <li>BBQ Equipment</li>
                                                <li>Children's high chairs</li>
                                                <li>Special diet menus (on request)</li>
                                                <li>Massage</li>
                                                <li>Airport shuttle (additional cost)</li>
                                                <li>Newspapers</li>
                                                <li>Fan</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="policy">
                                <div class="room-detail_overview">
                                    <h5 class="text-uppercase">What You Need To Know </h5>
                                    <br>
                                    @{
                                        foreach (var policy in policies)
                                        {
                                            @Html.Raw(policy.Value)
                                        }
                                    }
                                    <br>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="rates">
                                <div class="room-detail_rates">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Rate Period</th>
                                                <th>Nightly</th>
                                            </tr>
                                        </thead>
                                        <tr>
                                            <td>
                                                <h6>Weekday</h6>
                                            </td>
                                            <td>
                                                <p class="price"><span class="amout">RM @room.RackRates.FirstOrDefault(rr => rr.RackRateType.Name == Softinn.EntityModels.AppSettings.RackRateTypeWeekday).Rates.ToString("#")</span></p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h6>Weekend</h6>
                                            </td>
                                            <td>
                                                <p class="price"><span class="amout">RM @room.RackRates.FirstOrDefault(rr => rr.RackRateType.Name == Softinn.EntityModels.AppSettings.RackRateTypeWeekend).Rates.ToString("#")</span></p>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td>
                                                <h6>Public Holiday</h6>
                                            </td>
                                            <td>
                                                <p class="price"><span class="amout">RM @room.RackRates.FirstOrDefault(rr => rr.RackRateType.Name == Softinn.EntityModels.AppSettings.RackRateTypePublicHoliday).Rates.ToString("#")</span></p>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="room-detail_compare">
                <h2 class="room-compare_title">Other Rooms</h2>
                <div class="room-compare_content">
                    <div class="row">
                        @{
                            foreach (var otherRoom in otherRooms.Take(3))
                            {
                                <div class="col-sm-6 col-md-4">
                                    <div class="room-compare_item">
                                        <div class="img">
                                            <a href="/Rooms/Detail/@otherRoom.Name.ToSeoFriendly()"><img src="@otherRoom.ImagePath" alt="@otherRoom.Name"></a>
                                        </div>
                                        <div class="text">
                                            <h2>
                                                <a href="/Rooms/Detail/@otherRoom.Name.ToSeoFriendly()">@otherRoom.Name</a>
                                            </h2>
                                            <ul>
                                                <li><i class="fa fa-male"></i> Max: @otherRoom.GuestNumberMax Adults</li>
                                                @if (otherRoom.BedRelationship != null)
                                                {
                                                    <li>
                                                        <i class="fa fa-bed"></i> Bed:
                                                        @foreach (var bed in otherRoom.BedRelationship.Beds)
                                                        {
                                                            <span>@bed.Count @bed.Name</span>
                                                            if (bed != otherRoom.BedRelationship.Beds.ToArray()[otherRoom.BedRelationship.Beds.Count() - 1])
                                                            {
                                                                <span>@otherRoom.BedRelationship.RelationshipType.Name</span>
                                                            }
                                                        }
                                                    </li>
                                                }
                                            </ul>
                                            <a href="/Rooms/Detail/@otherRoom.Name.ToSeoFriendly()" class="awe-btn awe-btn-default">VIEW DETAIL</a>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </section>

</div>
