@using Softinn.EntityModels.ViewModel
@using EmbunLuxuryVillas.Helpers
@using EmbunLuxuryVillas.ViewModels
@{
    RoomTypeViewModel room = ViewBag.Room;
    List<RoomTypeViewModel> otherRooms = ViewBag.OtherRooms;
    var photos = room.Photos.Any() ? room.Photos : new List<PhotoViewModel>();
    List<PolicyViewModel> policies = ViewBag.ViewModel.Policies;
    CustomRoomViewModel additionalRoomInfo = ViewBag.AdditionalRoomInfo;
}

<div id="page-room-detail">

    <section class="section-sub-banner bg-1">
        <div class="awe-overlay"></div>
        <div class="sub-banner">
            <div class="container">
                <div class="text text-center">
                    <h2>@room.Name</h2>
                    <p></p>
                </div>
            </div>
        </div>
    </section>

    <section class="section-room-detail bg-white">
        <div class="container">
            <div class="room-detail">
                <div class="row">

                    <div class="col-lg-9">
                        @{
                            <div class="room-detail_img">
                                @foreach (var photo in photos)
                                {
                                    <div class="room_img-item">
                                        <img src="@BvHelper.GetImageLinkFromStorage(photo.URLStorage)" alt="@room.Name">
                                    </div>
                                }
                            </div>

                            <div class="room-detail_thumbs">
                                @foreach (var photo in photos)
                                {
                                    <a href="#"><img src="@BvHelper.GetImageLinkFromStorage(photo.URLStorage)" alt="@room.Name"></a>
                                }
                            </div>
                        }
                    </div>

                    <div class="col-lg-3">
                        <div class="room-detail_book">
                            <div class="room-detail_total">
                                <h6>STARTING FROM</h6>

                                <p class="price">
                                    <span class="amout">RM @room.RackRates.Select(rr => rr.Rates).Min().ToString("#")</span> /night
                                </p>
                            </div>

                            <div class="room-detail_form">
                                <form action="/Reservation" method="post">
                                    <label>CHECK IN</label>
                                    <input type="text" name="startDate" class="awe-calendar from" placeholder="Check-In Date" readonly>
                                    <label>CHECK OUT</label>
                                    <input type="text" name="endDate" class="awe-calendar to" placeholder="Check-Out Date" readonly>

                                    <button class="awe-btn awe-btn-13">Book Now</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="room-detail_tab">
                <div class="row">
                    <div class="col-md-3">
                        <ul class="room-detail_tab-header">
                            <li><a href="#overview" data-toggle="tab">OVERVIEW</a></li>
                            <li class="active"><a href="#amenities" data-toggle="tab">Amenities</a></li>
                            <li><a href="#rates" data-toggle="tab">RATES</a></li>
                            <li><a href="#policy" data-toggle="tab">Booking Policies</a></li>
                        </ul>
                    </div>

                    <div class="col-md-9">
                        <div class="room-detail_tab-content tab-content">
                            <div class="tab-pane fade" id="overview">
                                <div class="room-detail_overview">
                                    <h5 class='text-uppercase'>
                                        Overview of @room.Name
                                    </h5>
                                    <br />
                                    @Html.Raw(room.FullDescription)
                                </div>
                            </div>

                            <div class="tab-pane fade active in" id="amenities">
                                <div class="room-detail_amenities">
                                    <div class="row">
                                        <div class="col-xs-6 col-lg-4">
                                            <h6>Amenities</h6>
                                            <ul>
                                                <li>Free wifi</li>
                                                <li>TV</li>
                                                <li>Astro Channel</li>
                                                <li>Air - conditioner</li>
                                                <li>Iron</li>
                                                <li>Kettle</li>
                                                <li>Toaster</li>
                                                <li>Coffee/tea making facilities</li>
                                                <li>Cooking facilities</li>
                                                <li>Hot & Cold Rain Shower</li>
                                                <li>Hairdryer</li>
                                                <li>Fridge</li>
                                                <li>Safety box</li>
                                                <li>Toiletries</li>
                                                <li>Towels</li>
                                                <li>Baby cot</li>
                                                <li>Writing desk</li>
                                                <li>Fan</li>
                                            </ul>
                                        </div>
                                        <div class="col-xs-6 col-lg-4">
                                            <h6>Facilities</h6>
                                            <ul>
                                                <li>Parking</li>
                                                <li>Extra mattress (roll-away bed)</li>
                                                <li>Wheelchair friendly</li>
                                                <li>Swimming Pool</li>
                                                <li>Meeting/Conference Room</li>
                                                <li>Family Gathering/Event</li>
                                                <li>Room Service</li>
                                                <li>BBQ Equipment (additional cost)</li>
                                                <li>Children's high chairs</li>
                                                <li>Special diet menus (on request)</li>
                                                <li>Massage</li>
                                                <li>Airport shuttle (additional cost)</li>
                                                <li>Newspapers</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="policy">
                                <div class="room-detail_overview">
                                    <h5 class="text-uppercase">BOOKING POLICIES</h5>
                                    <br />
                                    <p><u>By accepting/ making this booking, you agree to the Hotels Policies and the following terms:</u></p>
                                    <br />
                                    <p>Check-in from 3.00 pm and check out at 12.00 pm.</p>
                                    <br />
                                    <p>Late check out is strictly subject to availability and not later than 2.00 pm.</p>
                                    <br />
                                    <p>If you wish to extend the check-out time and subject to availability, an additional fee equal to</p>
                                    <ul>
                                        <li>15% of your room rate will be charged for extensions until 3:00 pm</li>
                                        <li>30% for extensions until 4.00 pm</li>
                                        <li>50% for extensions until 6:00 pm, and</li>
                                        <li>an additional fee equal to the full room rate for checking-out after 6:00 pm.</li>
                                    </ul>
                                    <br />
                                    <p>Additional breakfast request; Adult: RM55+ / Children (5y-12y): RM35+.</p>
                                    <br />
                                    <p>Additional dinner request; Adult: RM85+ / Children (5y-12y): RM55+.</p>
                                    <br />
                                    <p>Extra roll-away bed is charged at RM95.00+ each, exclusive of breakfast and subject to availability.</p>
                                    <br />
                                    <p>Extra roll-away bed is charged at RM150.00+ inclusive of breakfast and subject to availability.</p>
                                    <br />
                                    <p>Refundable safety deposit RM500.00 is required upon check-in.</p>
                                    <br />
                                    <p>During the eve of and on Chinese New Year & New Year gazetted public holidays, additional surcharge rates are RM200+ for the suite and one bedroom villas, RM250+ for two bedroom villas and RM300+ for three bedroom villas.</p>
                                    <br />
                                    <p>Room Occupancy</p>
                                    <ul>
                                        <li>Rates are offered strictly on a twin-sharing basis per room</li>
                                        <li>Maximum occupancy per room is two (2) adults and one (1) child 12 years and below OR two (2) adults and two (2) children 6 years and below</li>
                                        <li>Guests showing up with more than the maximum capacity of the villas or suite can be charged additional fees or refused entry with no reimbursement or refund of any payment made.</li>
                                    </ul>
                                    <br />
                                    <p>Cancellation Policy</p>
                                    <ul>
                                        <li>Confirmation of reservation is subject to full payment of total stay</li>
                                        <li>Cancellations made on promotional rates requires full prepayment. It is non-cancellable, non-refundable and no changes are allowed</li>
                                        <li>Cancellations 14 days or less before the booked date will be charged one-night stay</li>
                                        <li>Cancellations within 48 hours of booked date will be charged the entire stay</li>
                                        <li>All applicable cancellations & refunds made is subject to a processing fee of RM10.00 + Bank or Payment Gateway Charges.</li>
                                    </ul>
                                    <br />
                                    <p>Baggage and personal effects are at guests' own risk throughout their stay.</p>
                                    <br />
                                    <p>The Hotel shall be reimbursed for all damages to property or personal injury as a result of any negligent or wilful act by guests and/or they invitee(s).</p>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="rates">
                                <div class="room-detail_rates">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Rate Period</th>
                                                <th>Nightly</th>
                                            </tr>
                                        </thead>
                                        <tr>
                                            <td>
                                                <h6>Weekday</h6>
                                            </td>
                                            <td>
                                                <p class="price"><span class="amout">RM @room.RackRates.FirstOrDefault(rr => rr.RackRateType.Name == Softinn.EntityModels.AppSettings.RackRateTypeWeekday).Rates.ToString("#")</span></p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h6>Weekend</h6>
                                            </td>
                                            <td>
                                                <p class="price"><span class="amout">RM @room.RackRates.FirstOrDefault(rr => rr.RackRateType.Name == Softinn.EntityModels.AppSettings.RackRateTypeWeekend).Rates.ToString("#")</span></p>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td>
                                                <h6>Public Holiday</h6>
                                            </td>
                                            <td>
                                                <p class="price"><span class="amout">RM @room.RackRates.FirstOrDefault(rr => rr.RackRateType.Name == Softinn.EntityModels.AppSettings.RackRateTypePublicHoliday).Rates.ToString("#")</span></p>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="room-detail_compare">
                <h2 class="room-compare_title">Other Rooms</h2>
                <div class="room-compare_content">
                    <div class="row">
                        @{
                            foreach (var otherRoom in otherRooms.Take(3))
                            {
                                <div class="col-sm-6 col-md-4">
                                    <div class="room-compare_item">
                                        <div class="img">
                                            <a href="/Rooms/Detail/@otherRoom.Name.ToSeoFriendly()"><img src="@otherRoom.ImagePath" alt="@otherRoom.Name"></a>
                                        </div>
                                        <div class="text">
                                            <h2>
                                                <a href="/Rooms/Detail/@otherRoom.Name.ToSeoFriendly()">@otherRoom.Name</a>
                                            </h2>
                                            <ul>
                                                <li><i class="fa fa-male"></i> Max: @otherRoom.GuestNumberMax @(otherRoom.GuestNumberMax > 1 ? "Adults" : "Adult")</li>
                                                @if (otherRoom.BedRelationship != null)
                                                {
                                                    <li>
                                                        <i class="fa fa-bed"></i> Bed:
                                                        @foreach (var bed in otherRoom.BedRelationship.Beds)
                                                        {
                                                            <span>@bed.Count @bed.Name</span>
                                                            if (bed != otherRoom.BedRelationship.Beds.ToArray()[otherRoom.BedRelationship.Beds.Count() - 1])
                                                            {
                                                                <span>@otherRoom.BedRelationship.RelationshipType.Name</span>
                                                            }
                                                        }
                                                    </li>
                                                }
                                            </ul>
                                            <a href="/Rooms/Detail/@otherRoom.Name.ToSeoFriendly()" class="awe-btn awe-btn-default">VIEW DETAILS</a>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </section>

</div>
